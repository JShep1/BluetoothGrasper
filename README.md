Note: most code is modified from https://people.csail.mit.edu/albert/bluez-intro/x502.html
